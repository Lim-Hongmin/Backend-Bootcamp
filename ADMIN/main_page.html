<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Admin Page</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* 다크 모드 기본 스타일 */
    body.dark-mode {
      background-color: #121212;
      color: #ffffff;
    }

    /* 다크 모드에서의 테이블 스타일 */
    body.dark-mode .table {
      color: #ffffff;
      background-color: #1e1e1e !important;
    }

    body.dark-mode .table th, 
    body.dark-mode .table td {
      color: #ffffff;
      border-color: #444;
      background-color: #2c2c2c !important;
    }

    body.dark-mode .table-striped tbody tr:nth-of-type(odd) {
      background-color: #3a3a3a !important;
    }

    body.dark-mode .table-hover tbody tr:hover {
      background-color: #4a4a4a !important;
    }

    /* 다크 모드에서의 버튼 스타일 */
    body.dark-mode .btn-secondary {
      background-color: #333333;
      border-color: #444444;
    }

    body.dark-mode .btn-primary {
      background-color: #0d6efd;
      border-color: #0b5ed7;
    }

    body.dark-mode .btn-success {
      background-color: #198754;
      border-color: #157347;
    }

    body.dark-mode .btn-close {
      filter: invert(1);
    }

    /* 다크 모드에서의 폼 요소 스타일 */
    body.dark-mode .form-control,
    body.dark-mode .form-select {
      background-color: #2c2c2c;
      color: #ffffff;
      border-color: #444444;
    }

    body.dark-mode .form-control:focus,
    body.dark-mode .form-select:focus {
      background-color: #3a3a3a;
      color: #ffffff;
      border-color: #666666;
      box-shadow: none;
    }

    /* 다크 모드에서의 플레이스홀더 텍스트 스타일 */
    body.dark-mode .form-control::placeholder,
    body.dark-mode .form-select::placeholder {
      color: #cccccc; /* 적절한 회색 톤으로 설정 */
      opacity: 1; /* 일부 브라우저에서 색상 적용을 보장 */
    }

    /* 다크 모드에서의 모달 스타일 */
    body.dark-mode .modal-content {
      background-color: #1e1e1e;
      color: #ffffff;
      border-color: #444444;
    }

    body.dark-mode .modal-header,
    body.dark-mode .modal-footer {
      border-color: #444444;
    }

    /* 다크 모드에서의 페이지 네비게이션 스타일 */
    body.dark-mode .pagination .page-link {
      background-color: #2c2c2c;
      color: #ffffff;
      border-color: #444444;
    }

    body.dark-mode .pagination .page-link:hover {
      background-color: #3a3a3a;
      color: #ffffff;
    }

    body.dark-mode .pagination .active .page-link {
      background-color: #0d6efd;
      border-color: #0d6efd;
      color: #ffffff;
    }

    /* 기타 다크 모드 스타일 조정 */
    body.dark-mode .invalid-feedback {
      color: #ff6b6b;
    }

    body.dark-mode .visually-hidden {
      color: #ffffff;
    }
  </style>
</head>
<body>
  <div class="container mt-3">
    <h3 class="mt-5 mb-3">신규 등록 상품</h3>
    <div class="d-flex justify-content-between align-items-center flex-wrap">
      <div id="currentDateTime" class="mb-3"></div>
      <button id="toggleDarkMode" class="btn btn-secondary mb-3">다크 모드</button>
    </div>
    <form class="row row-cols-lg-auto g-3 align-items-center needs-validation" novalidate>      
      <div class="col-12">
        <label class="visually-hidden" for="inlineFormSelectPref">카테고리 선택</label>
        <select class="form-select" id="inlineFormSelectPref" name="category_data_table" required>
          <option value="">카테고리를 선택하세요</option>
          <option value="상의">상의</option>
          <option value="하의">하의</option>
          <option value="신발">신발</option>
          <option value="패션잡화">패션잡화</option>
        </select>
        <div class="invalid-feedback">카테고리를 선택해주세요.</div>
      </div>
      <div class="col-12">
        <select class="form-select" id="genderSelect" name="gender" required>
          <option value="">성별을 선택하세요</option>
          <option value="남성">남성</option>
          <option value="여성">여성</option>
        </select>
        <div class="invalid-feedback">성별을 선택해주세요.</div>
      </div>
      <div class="col-3">
        <input type="text" class="form-control" placeholder="제품명을 입력해주세요" required>
        <div class="invalid-feedback">제품명을 입력해주세요.</div>
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-primary">조회</button>
      </div>
      <div class="col-auto">
        <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#productModal">상품 추가</button>
      </div>
    </form>

    <div class="table-responsive mt-3">
      <table class="table table-sm table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">카테고리</th>
            <th scope="col">브랜드</th>
            <th scope="col">상품명</th>
            <th scope="col">가격</th>
          </tr>
        </thead>
        <tbody id="product_data_Table">
          <!-- 제품 데이터가 여기 추가됩니다. -->
        </tbody>
      </table>
    </div>

    <nav aria-label="Page navigation example">
      <ul class="pagination justify-content-center mt-4">
        <li class="page-item disabled">
          <a class="page-link" href="#" tabindex="-1" aria-disabled="true">이전</a>
        </li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item">
          <a class="page-link" href="#">다음</a>
        </li>
      </ul>
    </nav>
  </div>

  <!-- 상품 추가 모달 -->
  <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="productModalLabel">상품 추가</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="productForm" class="needs-validation" novalidate>
            <div class="mb-3">
              <label for="productCategory" class="form-label">카테고리</label>
              <select class="form-select" id="productCategory" required>
                <option value="">카테고리를 선택하세요</option>
                <option value="상의">상의</option>
                <option value="하의">하의</option>
                <option value="신발">신발</option>
                <option value="패션잡화">패션잡화</option>
              </select>
              <div class="invalid-feedback">카테고리를 선택해주세요.</div>
            </div>
            <div class="mb-3">
              <label for="productBrand" class="form-label">브랜드</label>
              <input type="text" class="form-control" id="productBrand" required>
              <div class="invalid-feedback">브랜드를 입력해주세요.</div>
            </div>
            <div class="mb-3">
              <label for="productName" class="form-label">상품명</label>
              <input type="text" class="form-control" id="productName" required>
              <div class="invalid-feedback">상품명을 입력해주세요.</div>
            </div>
            <div class="mb-3">
              <label for="productPrice" class="form-label">가격</label>
              <input type="text" class="form-control" id="productPrice" required>
              <div class="invalid-feedback">가격을 입력해주세요.</div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
          <button type="button" class="btn btn-primary" id="saveProduct">저장</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 다크 모드 토글 기능
    const toggleDarkModeButton = document.getElementById('toggleDarkMode');
    toggleDarkModeButton.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      if (document.body.classList.contains('dark-mode')) {
        localStorage.setItem('dark-mode', 'enabled');
        toggleDarkModeButton.textContent = '라이트 모드';
      } else {
        localStorage.setItem('dark-mode', 'disabled');
        toggleDarkModeButton.textContent = '다크 모드';
      }
    });

    // 로컬 저장소에서 다크 모드 상태 로드
    document.addEventListener('DOMContentLoaded', () => {
      if (localStorage.getItem('dark-mode') === 'enabled') {
        document.body.classList.add('dark-mode');
        toggleDarkModeButton.textContent = '라이트 모드';
      }
    });

    // 폼 유효성 검사
    (function () {
      'use strict';
      const forms = document.querySelectorAll('.needs-validation');
      Array.from(forms).forEach(function (form) {
        form.addEventListener('submit', function (event) {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    })();

    // 제품 데이터 로딩 및 추가 기능
    const product_data = [
      { category: "상의", brand: 'Supreme', product: '슈프림 박스로고 후드티', price: '390,000' },
      { category: "하의", brand: 'DIESEL', product: '디젤 트랙 팬츠', price: '188,000' },
      { category: "신발", brand: 'Nike', product: '에어포스 1', price: '137,000' },
      { category: "패션잡화", brand: 'Music&Goods', product: '빵빵이 키링', price: '29,000' },
    ];

    const product_data_Table = document.getElementById('product_data_Table');
    product_data.forEach((item) => {
      const rowHTML = `
        <tr>
          <td>${item.category}</td>
          <td>${item.brand}</td>
          <td>${item.product}</td>
          <td>${item.price}</td>
        </tr>`;
      product_data_Table.insertAdjacentHTML('beforeend', rowHTML);
    });

    // 모달을 통한 상품 추가 기능
    document.getElementById('saveProduct').addEventListener('click', () => {
      const category = document.getElementById('productCategory').value;
      const brand = document.getElementById('productBrand').value.trim();
      const product = document.getElementById('productName').value.trim();
      const price = document.getElementById('productPrice').value.trim();

      if (category && brand && product && price) {
        // 가격 형식 검증 (숫자와 콤마만 허용)
        const pricePattern = /^[0-9,]+$/;
        if (!pricePattern.test(price)) {
          alert('가격은 숫자와 콤마만 입력 가능합니다.');
          return;
        }

        const rowHTML = `
          <tr>
            <td>${category}</td>
            <td>${brand}</td>
            <td>${product}</td>
            <td>${price}</td>
          </tr>`;
        product_data_Table.insertAdjacentHTML('beforeend', rowHTML);
        document.getElementById('productForm').reset();
        document.querySelectorAll('#productForm .form-control, #productForm .form-select').forEach(element => {
          element.classList.remove('is-valid', 'is-invalid');
        });
        const productModal = new bootstrap.Modal(document.getElementById('productModal'));
        productModal.hide();
      } else {
        // 폼 유효성 표시
        document.getElementById('productForm').classList.add('was-validated');
      }
    });

    // 현재 날짜와 시간 표시
    function updateDateTime() {
      const now = new Date();
      const dateTimeString = now.toLocaleString('ko-KR', { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric', 
        hour: '2-digit', 
        minute: '2-digit', 
        second: '2-digit' 
      });
      document.getElementById('currentDateTime').innerText = `현재 시간: ${dateTimeString}`;
    }
    setInterval(updateDateTime, 1000);
    updateDateTime();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
